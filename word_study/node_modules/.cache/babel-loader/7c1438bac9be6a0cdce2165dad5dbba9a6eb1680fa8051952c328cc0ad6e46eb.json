{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\nexport default {\n  data() {\n    return {\n      userInput: \"\",\n      isChatOpen: false,\n      messages: []\n    };\n  },\n  methods: {\n    sendMessage() {\n      if (this.userInput.trim() === \"\") {\n        return; // 用户输入为空，不执行任何操作\n      }\n\n      // 将连续的换行替换为一个换行\n      this.userInput = this.userInput.replace(/\\n\\s*\\n/g, \"\\n\");\n      this.messages.push({\n        sender: \"user\",\n        text: this.userInput\n      });\n      const userInput = this.userInput;\n      this.userInput = \"\";\n\n      // 滚动聊天框到底部\n      const chatContent = this.$el.querySelector(\".chat-content\");\n      chatContent.scrollTop = chatContent.scrollHeight;\n\n      // 发送请求到Flask服务器\n      axios.post(\"http://localhost:5200/api/chat\", {\n        message: userInput\n      }).then(response => {\n        // 服务器响应成功\n        this.messages.push({\n          sender: \"bot\",\n          text: response.data.message\n        });\n        this.$nextTick(() => {\n          // 再次滚动聊天框到底部\n          chatContent.scrollTop = chatContent.scrollHeight;\n        });\n      }).catch(error => {\n        // 处理错误\n        console.error(error);\n      });\n    },\n    handleEnterKey(event) {\n      if (!event.shiftKey) {\n        event.preventDefault();\n        this.sendMessage();\n      }\n    },\n    handleShiftEnterKey(event) {\n      if (event.shiftKey) {\n        event.preventDefault();\n        this.userInput += \"\\n\";\n      }\n    },\n    handleCtrlEnterKey(event) {\n      if (event.ctrlKey) {\n        event.preventDefault();\n        this.sendMessage();\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","data","userInput","isChatOpen","messages","methods","sendMessage","trim","replace","push","sender","text","chatContent","$el","querySelector","scrollTop","scrollHeight","post","message","then","response","$nextTick","catch","error","console","handleEnterKey","event","shiftKey","preventDefault","handleShiftEnterKey","handleCtrlEnterKey","ctrlKey"],"sources":["D:\\code-sync-master\\word_study\\src\\components\\ChatBox.vue"],"sourcesContent":["<template>\n  <div class=\"chat-box-container\">\n    <div v-if=\"isChatOpen\" class=\"chat-box\">\n      <div class=\"chat-header\" @click=\"isChatOpen = !isChatOpen\">\n        <h3 class=\"header-text\">Word Usage</h3>\n      </div>\n      <div class=\"chat-content\">\n        <div v-for=\"(message, index) in messages\" :key=\"index\" class=\"message\">\n          <div v-if=\"message.sender === 'user'\" class=\"user-message\">\n            <div>{{ message.text }}</div> <!-- Modified this line -->\n          </div>\n          <div v-else class=\"bot-message\">\n            <div>{{ message.text }}</div> <!-- And this line -->\n          </div>\n        </div>\n      </div>\n      <div class=\"chat-input\">\n        <textarea\n          v-model=\"userInput\"\n          placeholder=\"Type your message...\"\n          @keydown.enter.exact.prevent=\"handleEnterKey\"\n          @keydown.enter.ctrl.exact.prevent=\"handleCtrlEnterKey\"\n          @keydown.enter.exact.shift=\"handleShiftEnterKey\"\n        ></textarea>\n\n        <button class=\"send-button\" @click=\"sendMessage\">Send</button>\n      </div>\n    </div>\n    <div v-else class=\"chat-icon\" @click=\"isChatOpen = !isChatOpen\">\n      <font-awesome-icon icon=\"comments\" />\n    </div>\n  </div>\n</template>\n\n  \n  <script>\nimport axios from \"axios\";\n\nexport default {\n  data() {\n    return {\n      userInput: \"\",\n      isChatOpen: false,\n      messages: [],\n    };\n  },\n  methods: {\n    sendMessage() {\n      if (this.userInput.trim() === \"\") {\n        return; // 用户输入为空，不执行任何操作\n      }\n\n      // 将连续的换行替换为一个换行\n      this.userInput = this.userInput.replace(/\\n\\s*\\n/g, \"\\n\");\n\n      this.messages.push({ sender: \"user\", text: this.userInput });\n      const userInput = this.userInput;\n      this.userInput = \"\";\n\n      // 滚动聊天框到底部\n      const chatContent = this.$el.querySelector(\".chat-content\");\n      chatContent.scrollTop = chatContent.scrollHeight;\n\n      // 发送请求到Flask服务器\n      axios\n        .post(\"http://localhost:5200/api/chat\", { message: userInput })\n        .then((response) => {\n          // 服务器响应成功\n          this.messages.push({ sender: \"bot\", text: response.data.message });\n\n          this.$nextTick(() => {\n            // 再次滚动聊天框到底部\n            chatContent.scrollTop = chatContent.scrollHeight;\n          });\n        })\n        .catch((error) => {\n          // 处理错误\n          console.error(error);\n        });\n    },\n\n    handleEnterKey(event) {\n      if (!event.shiftKey) {\n        event.preventDefault();\n        this.sendMessage();\n      }\n    },\n    handleShiftEnterKey(event) {\n      if (event.shiftKey) {\n        event.preventDefault();\n        this.userInput += \"\\n\";\n      }\n    },\n    handleCtrlEnterKey(event) {\n      if (event.ctrlKey) {\n        event.preventDefault();\n        this.sendMessage();\n      }\n    },\n  },\n};\n</script>\n  \n  <style scoped>\n@import url(\"../../css/ChatBoxStyles.css\");\n</style>\n  "],"mappings":";AAoCA,OAAOA,KAAI,MAAO,OAAO;AAEzB,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,SAAS,EAAE,EAAE;MACbC,UAAU,EAAE,KAAK;MACjBC,QAAQ,EAAE;IACZ,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACPC,WAAWA,CAAA,EAAG;MACZ,IAAI,IAAI,CAACJ,SAAS,CAACK,IAAI,CAAC,MAAM,EAAE,EAAE;QAChC,OAAM,CAAE;MACV;;MAEA;MACA,IAAI,CAACL,SAAQ,GAAI,IAAI,CAACA,SAAS,CAACM,OAAO,CAAC,UAAU,EAAE,IAAI,CAAC;MAEzD,IAAI,CAACJ,QAAQ,CAACK,IAAI,CAAC;QAAEC,MAAM,EAAE,MAAM;QAAEC,IAAI,EAAE,IAAI,CAACT;MAAU,CAAC,CAAC;MAC5D,MAAMA,SAAQ,GAAI,IAAI,CAACA,SAAS;MAChC,IAAI,CAACA,SAAQ,GAAI,EAAE;;MAEnB;MACA,MAAMU,WAAU,GAAI,IAAI,CAACC,GAAG,CAACC,aAAa,CAAC,eAAe,CAAC;MAC3DF,WAAW,CAACG,SAAQ,GAAIH,WAAW,CAACI,YAAY;;MAEhD;MACAhB,KAAI,CACDiB,IAAI,CAAC,gCAAgC,EAAE;QAAEC,OAAO,EAAEhB;MAAU,CAAC,EAC7DiB,IAAI,CAAEC,QAAQ,IAAK;QAClB;QACA,IAAI,CAAChB,QAAQ,CAACK,IAAI,CAAC;UAAEC,MAAM,EAAE,KAAK;UAAEC,IAAI,EAAES,QAAQ,CAACnB,IAAI,CAACiB;QAAQ,CAAC,CAAC;QAElE,IAAI,CAACG,SAAS,CAAC,MAAM;UACnB;UACAT,WAAW,CAACG,SAAQ,GAAIH,WAAW,CAACI,YAAY;QAClD,CAAC,CAAC;MACJ,CAAC,EACAM,KAAK,CAAEC,KAAK,IAAK;QAChB;QACAC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;MACtB,CAAC,CAAC;IACN,CAAC;IAEDE,cAAcA,CAACC,KAAK,EAAE;MACpB,IAAI,CAACA,KAAK,CAACC,QAAQ,EAAE;QACnBD,KAAK,CAACE,cAAc,CAAC,CAAC;QACtB,IAAI,CAACtB,WAAW,CAAC,CAAC;MACpB;IACF,CAAC;IACDuB,mBAAmBA,CAACH,KAAK,EAAE;MACzB,IAAIA,KAAK,CAACC,QAAQ,EAAE;QAClBD,KAAK,CAACE,cAAc,CAAC,CAAC;QACtB,IAAI,CAAC1B,SAAQ,IAAK,IAAI;MACxB;IACF,CAAC;IACD4B,kBAAkBA,CAACJ,KAAK,EAAE;MACxB,IAAIA,KAAK,CAACK,OAAO,EAAE;QACjBL,KAAK,CAACE,cAAc,CAAC,CAAC;QACtB,IAAI,CAACtB,WAAW,CAAC,CAAC;MACpB;IACF;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}